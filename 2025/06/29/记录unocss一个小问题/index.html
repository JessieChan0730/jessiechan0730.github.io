<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="author" content="Jessie Chan"/><meta name="keyword" content="blog"/><meta name="description" content="1. 简介❓最近项目用到了unocss作为css框架，unocsss是一个原子 CSS 引擎，在模板中就可以编写对应的css样式用起来还是比较方便，这里是官方文档：https:&#x2F;&#x2F;unocss.nodejs.cn 2. 问题描述😁2.1 准备下面是一个简单的按钮组件： 1234567891011&lt;template&gt;    &lt;div flex&#x3D;&quot;~&quot; curs">
<meta property="og:type" content="article">
<meta property="og:title" content="记录unocss一个小问题">
<meta property="og:url" content="https://jessiechan0730.github.io/2025/06/29/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/index.html">
<meta property="og:site_name" content="Jessie&#39;Blog">
<meta property="og:description" content="1. 简介❓最近项目用到了unocss作为css框架，unocsss是一个原子 CSS 引擎，在模板中就可以编写对应的css样式用起来还是比较方便，这里是官方文档：https:&#x2F;&#x2F;unocss.nodejs.cn 2. 问题描述😁2.1 准备下面是一个简单的按钮组件： 1234567891011&lt;template&gt;    &lt;div flex&#x3D;&quot;~&quot; curs">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-1.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-2.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-3.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-5.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-4.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-6.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-7.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-8.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-9.png">
<meta property="og:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-10.png">
<meta property="article:published_time" content="2025-06-28T16:18:27.000Z">
<meta property="article:modified_time" content="2025-06-28T20:03:38.099Z">
<meta property="article:author" content="Jessie Chan">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="unocss">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jessiechan0730.github.io/image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-1.png"><title>记录unocss一个小问题 - JESSIE`BLOG - 一个普通人的博客小站</title><link rel="shortcut icon" href="/img/site-icon.png">
<link rel="stylesheet" href="/css/style.css" id="dm-light">


<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
<meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="top-nav" ondblclick="scrollToTop()"><div class="nav-info"><div class="nav-icon"><img id="nav-icon" src="/img/site-icon.png"/></div><div class="nav-title"><a id="nav-title" href="/" title="主页">Jessie'Blog</a></div></div><div class="nav-ribbon"><div class="top-menu-expanded"><a class="top-menu-item" href="/archives"><span>归档</span></a><a class="top-menu-item" href="/categories"><span>分类</span></a><a class="top-menu-item" href="/tags"><span>标签</span></a><a class="top-menu-item" href="/about"><span>关于</span></a></div><div class="top-search" onclick="toggleSearchWindow()"><div id="top-search-btn" title="搜索"><i class="icon fa-solid fa-magnifying-glass"></i><span>搜索</span></div></div><div id="top-menu-btn" onclick="openTopMenu()" title="打开菜单"><i class="fa-solid fa-bars fa-lg"></i></div></div></div></header><div id="top-menu-hidden"><div class="menu-hidden-content"><div class="menu-hidden-nav"><a class="menu-hidden-item" href="/archives"><i class="fa-solid fa-box-archive fa-sm"></i><span>归档</span></a><a class="menu-hidden-item" href="/categories"><i class="fa-regular fa-folder-open fa-sm"></i><span>分类</span></a><a class="menu-hidden-item" href="/tags"><i class="fa-solid fa-tags fa-sm"></i><span>标签</span></a><a class="menu-hidden-item" href="/about"><i class="fa-solid fa-paw fa-sm"></i><span>关于</span></a></div></div><div class="menu-hidden-blank" onclick="closeTopMenu()"></div></div>
<div class="blog-info"><div class="blog-pic"><img id="blog-pic" src="/img/site-icon.png"/></div><div class="blog-title"><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i><span>JESSIE`BLOG</span><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i></div><div class="blog-desc">本站用于发布技术文章、摄影分享以及日常生活等。</div></div><div class="main"><div class="main-content"><article class="post"><div class="post-title"><h1><i class="fa-solid fa-paw"></i>记录unocss一个小问题</h1></div><div class="post-info"><div class="post-info-first-line"><div class="post-date"><i class="icon fa-regular fa-calendar-plus" title="发布日期"></i><time class="publish-time">2025-06-29</time><i class="icon fa-regular fa-calendar-check" title="更新日期"></i><time class="update-time">2025-06-29</time></div>
<div class="post-categories"><i class="icon fa-regular fa-folder-open" title="分类"></i><a class="post-category" href="/categories/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/">个人笔记</a></div>
<div class="post-tags"><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/vue/">vue</a><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/unocss/">unocss</a></div></div><div class="post-info-second-line"><div class="post-copyright"><i class="icon fa-brands fa-creative-commons" title="版权声明"></i><span>版权声明: </span><a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh-hans" title="CC BY-NC-ND 4.0">署名-非商业性使用-禁止演绎 4.0</a></div>
<div class="post-word-count"><i class="icon fa-solid fa-pen-to-square"></i><span>全文约1.7K字</span></div><div class="pageview-post"><i class="icon fa-regular fa-eye"></i><span id="busuanzi_container_page_pv">阅读次数: <span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner"></i></span></span></div></div></div><div class="post-content"><h2 id="1-简介❓"><a href="#1-简介❓" class="headerlink" title="1. 简介❓"></a>1. 简介❓</h2><p>最近项目用到了unocss作为css框架，unocsss是一个原子 CSS 引擎，在模板中就可以编写对应的css样式用起来还是比较方便，这里是官方文档：<a target="_blank" rel="noopener" href="https://unocss.nodejs.cn/">https://unocss.nodejs.cn</a></p>
<h2 id="2-问题描述😁"><a href="#2-问题描述😁" class="headerlink" title="2. 问题描述😁"></a>2. 问题描述😁</h2><h3 id="2-1-准备"><a href="#2-1-准备" class="headerlink" title="2.1 准备"></a>2.1 准备</h3><p>下面是一个简单的按钮组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">flex</span>=<span class="string">&quot;~&quot;</span> <span class="attr">cursor-pointer</span> <span class="attr">w-full</span> <span class="attr">h-full</span> <span class="attr">justify-center</span> <span class="attr">items-center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">w-85px</span> <span class="attr">h-30px</span> <span class="attr">border-0</span> <span class="attr">text-center</span> <span class="attr">rounded-2px</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg-#6495ED&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: string,</span></span><br><span class="line"><span class="language-javascript">&#125;&gt;()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中使用unocss定义了宽，高以及背景等等。在props中我们接受了一个text来作为按钮中的文字显示，我们可以这么使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Button</span> <span class="attr">text</span>=<span class="string">&quot;hello world&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果大致如下，很简单的一个效果：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-1.png" alt="按钮图片"></p>
<h3 id="2-2-新需求"><a href="#2-2-新需求" class="headerlink" title="2.2 新需求"></a>2.2 新需求</h3><p>现在我希望这个按钮组件定制化程度更高，比如，允许用户自定义它的背景颜色，那么我们很快可以想到可以让用户传入一个props，我们将组件修改至如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">flex</span>=<span class="string">&quot;~&quot;</span> <span class="attr">w-full</span> <span class="attr">h-full</span> <span class="attr">justify-center</span> <span class="attr">items-center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-85px h-30px border-0 text-center rounded-2px&quot;</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;[bgColor ? `bg-$&#123;bgColor&#125;` : &#x27;bg-#6495ED&#x27;, &#x27;cursor-pointer&#x27;]&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: string,</span></span><br><span class="line"><span class="language-javascript">    bgColor?: string</span></span><br><span class="line"><span class="language-javascript">&#125;&gt;()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们允许接受一个<code>bgColor</code>的props，并且在接收到后将其传到模板中，动态拼接出一个bg-${bgColor}的类名，比如用于传递的是”#fff”，那么此处拼接的就是<code>bg-#fff</code>，那么我们尝试：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">text</span>=<span class="string">&quot;hello world&quot;</span> <span class="attr">bg-color</span>=<span class="string">&quot;#f40&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时发现，按钮居然没有变为红色(#f40)：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-2.png" alt="无效"><br>你可能认为是不是类没有添加上去？但实际上是生成了：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-3.png" alt="类名"><br>如果我们不使用props，而是直接在组件内拼接呢？例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">flex</span>=<span class="string">&quot;~&quot;</span> <span class="attr">w-full</span> <span class="attr">h-full</span> <span class="attr">justify-center</span> <span class="attr">items-center</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-85px h-30px border-0 text-center rounded-2px&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;`bg-$&#123;bgColor&#125;`&quot;</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: string,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// bgColor: string</span></span></span><br><span class="line"><span class="language-javascript">&#125;&gt;()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span>  bgColor = <span class="title function_">ref</span>(<span class="string">&quot;#f40&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们发现同样是无效的：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-5.png" alt="无效"><br>如果我们手动写死呢，这个时候就有效了：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-85px h-30px border-0 text-center rounded-2px bg-#f40&quot;</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-4.png" alt="有效"><br>你以为结束了？假设此时我们重新回到第一步, 回归到通过props传递背景色：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">flex</span>=<span class="string">&quot;~&quot;</span> <span class="attr">w-full</span> <span class="attr">h-full</span> <span class="attr">justify-center</span> <span class="attr">items-center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-85px h-30px border-0 text-center rounded-2px&quot;</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;[bgColor ? `bg-$&#123;bgColor&#125;` : &#x27;bg-#6495ED&#x27;, &#x27;cursor-pointer&#x27;]&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">text</span>=<span class="string">&quot;hello world&quot;</span> <span class="attr">bg-color</span>=<span class="string">&quot;#f40&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时你会惊讶的发现，通过props传递的颜色值，居然有效了，并且不管是刷新还是重启项目都没问题：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-6.png" alt="有效"><br>此时我再换个传递的颜色呢？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">text</span>=<span class="string">&quot;hello world&quot;</span> <span class="attr">bg-color</span>=<span class="string">&quot;green&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后又寄掉，传递拼接的背景色又无效了：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-7.png" alt="无效"></p>
<h3 id="2-3-结论"><a href="#2-3-结论" class="headerlink" title="2.3 结论"></a>2.3 结论</h3><p>这个问题本质上是 UnoCSS 的原子类生成机制 导致的。UnoCSS（和 WindiCSS、Tailwind JIT 类似）会在编译时扫描你的源码，只生成源码中静态出现过的类名。<br>当你用字符串拼接（如 bg-${bgColor}）动态生成类名时，UnoCSS 在编译阶段无法“看到”这些动态类名，因此不会生成对应的 CSS，导致样式无效<code>（生没生成可以通过：localhost:5173/__unocss 查看）</code><br>具体表现如下：</p>
<ol>
<li>静态写死的类名（如 bg-#f40）能被 UnoCSS 检测到，样式有效。</li>
<li>动态拼接的类名（如 bg-${bgColor}），如果 bgColor 是变量，UnoCSS 检测不到，样式无效。</li>
<li>某些情况下（如 props 传递），如果你传递的值恰好和源码中静态出现过的类名一致，可能会“碰巧”有效，但换成没出现过的值就无效。</li>
</ol>
<h2 id="3-解决方案🔨"><a href="#3-解决方案🔨" class="headerlink" title="3. 解决方案🔨"></a>3. 解决方案🔨</h2><h3 id="3-1-Safelist（白名单）"><a href="#3-1-Safelist（白名单）" class="headerlink" title="3.1 Safelist（白名单）"></a>3.1 Safelist（白名单）</h3><p>在 UnoCSS 配置中用 safelist 明确列出你可能会用到的动态类名，UnoCSS 就会生成这些类的样式，例如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uno.config.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">safelist</span>: [</span><br><span class="line">    <span class="string">&#x27;bg-#f40&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;bg-green&#x27;</span>,</span><br><span class="line">    <span class="comment">// 你可能会用到的所有颜色</span></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>结果：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-8.png" alt="成功"><br>但是这种方案并不适合我们，用户传递的颜色我们并不知情，所以不太可能将所有颜色例入到<code>safelist</code>，还有一种方案是通过正则表达式，提前生成所有的样式，但是体积和性能会大幅度受到影响，所以不建议：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">safelist</span>: [</span><br><span class="line">  <span class="regexp">/^bg-\w+$/</span>, <span class="comment">// 生成所有 bg-xxx 的样式（注意性能和体积）</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="3-2-手动生成样式"><a href="#3-2-手动生成样式" class="headerlink" title="3.2 手动生成样式"></a>3.2 手动生成样式</h3><p>既然 unocss 无法自动帮我们生成的样式，不妨我们自己来生成，代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">flex</span>=<span class="string">&quot;~&quot;</span> <span class="attr">w-full</span> <span class="attr">h-full</span> <span class="attr">justify-center</span> <span class="attr">items-center</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; &#x27;--bg-color&#x27;: bgColor &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-85px h-30px border-0 text-center rounded-2px&quot;</span> <span class="attr">text</span>=<span class="string">&quot;14px #fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:class</span>=<span class="string">&quot;[bgColor ? &#x27;cus-btn-bg&#x27; : &#x27;bg-#6495ED&#x27;, &#x27;cursor-pointer&#x27;]&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = defineProps&lt;&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: string,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">bgColor</span>: string</span></span><br><span class="line"><span class="language-javascript">&#125;&gt;()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.cus-btn-bg</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">text</span>=<span class="string">&quot;hello world&quot;</span> <span class="attr">bg-color</span>=<span class="string">&quot;green&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的道理很简单，我们在style中定义一个<code>css变量</code>，将bgColor作为这个变量的值，然后在style标签中，我们自定义一个<code>cus-btn-bg</code>样式，并且引用了<code>--bg-color</code>这个css变量，这样就可以手动生成了，效果如下：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-9.png" alt="成功"></p>
<h2 id="4-备注🤔"><a href="#4-备注🤔" class="headerlink" title="4. 备注🤔"></a>4. 备注🤔</h2><h3 id="4-1-查看对应文件生成的样式"><a href="#4-1-查看对应文件生成的样式" class="headerlink" title="4.1 查看对应文件生成的样式"></a>4.1 查看对应文件生成的样式</h3><p>我们可以通过 <a target="_blank" rel="noopener" href="http://localhost:5173/__unocss">http://localhost:5173/__unocss</a> 来查看每个vue文件生成的样式：<br><img src="/../image/%E8%AE%B0%E5%BD%95unocss%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98/image-10.png" alt="alt text"><br>可以看到 Button.vue 这个文件已经生成了bg-#f40、bg-green等，所以我们第二步的时候，突然发现拼接动态类名有效了。</p>
<h3 id="4-2-相关问题"><a href="#4-2-相关问题" class="headerlink" title="4.2 相关问题"></a>4.2 相关问题</h3><p>貌似还有个icon动态拼接的问题，issue我放在，下面感兴趣的可以去看看：<br><a target="_blank" rel="noopener" href="https://github.com/unocss/unocss/issues/801">https://github.com/unocss/unocss/issues/801</a></p>
</div><div class="post-end"><div class="post-prev"><a href="/2025/07/20/%E5%85%B3%E4%BA%8E%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E6%91%84%E5%BD%B1%EF%BC%9F/" title="上一篇文章"><i class="fa-solid fa-chevron-left fa-lg"></i></a></div><div class="post-reward" onclick="openPostReward()" title="赞赏"><i class="fa-regular fa-thumbs-up fa-xl fa-beat-fade"></i></div><div id="reward-panel" onclick="closePostReward()"><div class="reward-container"><p>如果您喜欢这篇文章，欢迎赞赏支持作者，谢谢&#128151;</p>
<div class="reward-nav"><div class="reward-item"><img class="reward-img" src="/img/reward/wechat.jpg" title="Wechat" alt="Wechat"/><span>Wechat</span></div><div class="reward-item"><img class="reward-img" src="/img/reward/alipay.jpg" title="Alipay" alt="Alipay"/><span>Alipay</span></div></div></div></div><div class="post-next"><a href="/2025/06/08/%E5%A6%82%E4%BD%95%E5%B0%86ubuntu%E5%AE%89%E8%A3%85%E5%88%B0%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%EF%BC%9F/" title="下一篇文章"><i class="fa-solid fa-chevron-right fa-lg"></i></a></div></div></article><div class="comment" id="comment"><script src="https://giscus.app/client.js" data-repo="JessieChan0730/hexo-blog-guscus" data-repo-id="R_kgDOO3kdLQ" data-category="Announcements" data-category-id="DIC_kwDOO3kdLc4CrJnQ" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="zh-CN" crossorigin="anonymous" async="async"></script></div><div id="post-toc"><aside class="toc-aside"><div class="toc-title"><span><i class="fa-solid fa-paw"></i>目录</span></div><div class="toc-container" id="toc-body"><ol class="toc-content"><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#1-%E7%AE%80%E4%BB%8B%E2%9D%93"><span class="toc-content-number">1.</span> <span class="toc-content-text">1. 简介❓</span></a></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#2-%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%F0%9F%98%81"><span class="toc-content-number">2.</span> <span class="toc-content-text">2. 问题描述😁</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-1-%E5%87%86%E5%A4%87"><span class="toc-content-number">2.1.</span> <span class="toc-content-text">2.1 准备</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-2-%E6%96%B0%E9%9C%80%E6%B1%82"><span class="toc-content-number">2.2.</span> <span class="toc-content-text">2.2 新需求</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#2-3-%E7%BB%93%E8%AE%BA"><span class="toc-content-number">2.3.</span> <span class="toc-content-text">2.3 结论</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#3-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%F0%9F%94%A8"><span class="toc-content-number">3.</span> <span class="toc-content-text">3. 解决方案🔨</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#3-1-Safelist%EF%BC%88%E7%99%BD%E5%90%8D%E5%8D%95%EF%BC%89"><span class="toc-content-number">3.1.</span> <span class="toc-content-text">3.1 Safelist（白名单）</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#3-2-%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90%E6%A0%B7%E5%BC%8F"><span class="toc-content-number">3.2.</span> <span class="toc-content-text">3.2 手动生成样式</span></a></li></ol></li><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#4-%E5%A4%87%E6%B3%A8%F0%9F%A4%94"><span class="toc-content-number">4.</span> <span class="toc-content-text">4. 备注🤔</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#4-1-%E6%9F%A5%E7%9C%8B%E5%AF%B9%E5%BA%94%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-content-number">4.1.</span> <span class="toc-content-text">4.1 查看对应文件生成的样式</span></a></li><li class="toc-content-item toc-content-level-3"><a class="toc-content-link" href="#4-2-%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-content-number">4.2.</span> <span class="toc-content-text">4.2 相关问题</span></a></li></ol></li></ol></div></aside><div class="toc-blank" onclick="tocToggle()"></div></div></div></div><div id="tool-bar"><div id="tool-bar-main"><div id="tool-toggle" onclick="toolToggle()" title="设置"><i class="fa-solid fa-gear"></i></div><div id="toc-toggle" onclick="tocToggle()" title="目录"><i class="fa-solid fa-list-ul"></i></div><div id="go-to-comment" onclick="gotoComment()" title="评论"><i class="fa-regular fa-message fa-flip-horizontal"></i></div><div id="back-to-top" onclick="scrollToTop()" title="返回顶部"><i class="fa-solid fa-chevron-up"></i></div></div><div id="tool-bar-more" style="display: none;"><div id="darkmode-switch" onclick="darkmodeSwitch()" title="深色模式"><i class="fa-solid fa-circle-half-stroke"></i></div><div id="font-size-increase" onclick="fontSizeIncrease()" title="放大字体"><i class="fa-solid fa-plus"></i></div><div id="font-size-decrease" onclick="fontSizeDecrease()" title="缩小字体"><i class="fa-solid fa-minus"></i></div></div></div><div id="search-panel"><div class="search-container"><div class="search-head"><div class="search-title"><span><i class="fa-solid fa-paw"></i>搜索</span></div><div class="search-close-btn" onclick="toggleSearchWindow()"><i class="fa-regular fa-circle-xmark"></i></div></div><div class="search-box"><i class="fa-solid fa-magnifying-glass"></i><input id="search-input" type="text" placeholder="请输入需要搜索的内容……" value=""/></div><div class="search-body"><div id="search-count">匹配结果数: </div><div id="search-result"></div><div id="search-result-empty">未搜索到匹配的文章。</div></div></div></div><footer><div class="footer-content"><div class="copyright-info"><i class="fa-regular fa-copyright fa-xs"></i><span>2024 - 2025 </span><a href="/about">Jessie Chan</a><i class="fa-solid fa-cat fa-sm"></i><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo</a><span> &amp; </span><a href="https://github.com/chanwj/hexo-theme-meow" target="_blank" title="v2.1.5">Theme Meow</a></div><div class="pageview-site"><span id="busuanzi_container_site_pv">总访问量 : <span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner"></i></span></span><span id="busuanzi_container_site_uv">总访客数 : <span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner"></i></span></span></div></div></footer>
<script>const GLOBAL_CONFIG = {
  comment: { theme: 'light'}
}
</script>
<script src="/js/third-party/darkmode.js"></script>
<script>var options = {
  dark: '/css/darkmode.css',
  startAt: '24:00',
  endAt: '06:00',
  checkSystemScheme: 'false',
  saveOnToggle: 'true'
};
var darkMode = new DarkMode(options);
// change comment theme synchronously 同步修改评论区主题
if (darkMode.getMode() == "dark" && (true || true)) {
  if (document.getElementById('comment')) {
    document.getElementById('comment').getElementsByTagName('script')[0].setAttribute('data-theme', 'noborder_dark');
  }
}
</script><script>if (localStorage.getItem('font-size')) {
  document.querySelector('.post-content').style.fontSize = localStorage.getItem('font-size') + 'px';
}
</script>
<script src="/js/theme/tool-bar.js"></script>


<script src="/js/theme/menu.js"></script>


<script src="/js/third-party/clipboard.min.js"></script>


<script src="/js/theme/copy.js"></script>
<script>copyCode();
</script>
<script src="/js/theme/reward.js"></script>

<script src="/js/jquery-3.7.1.min.js"></script>


<script src="/js/theme/search.js"></script>
<script>searchFunc('/search.xml', 'search-input', 'search-result');
</script></body></html>